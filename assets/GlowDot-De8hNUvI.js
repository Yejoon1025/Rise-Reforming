import{r as n,j as m}from"./index-KBTjuFmx.js";import{X as it}from"./x-DMQyjllI.js";const Ye=n.createContext(null);function ft({children:ne,threshold:fe=.3,openOnDown:J="next",useViewportGuard:Q=!0,viewportThreshold:de=.05,viewportRootMargin:R="0px"}){const L=n.useRef(new Map),he=n.useRef(0),pe=220,b=n.useRef(!0),y=n.useRef(!1),g=n.useRef(!1),M=n.useRef(0),j=n.useRef(0),A=n.useRef(!1),$=n.useRef(0),k=n.useRef(0),O=n.useRef(null),X=n.useRef(!0),H=.25,V=20,_=40,a=n.useCallback(()=>Q?!!X.current:!0,[Q]),Y=n.useCallback((r,i)=>{const u=L.current.get(r)||{isVisible:!1,isOpen:()=>!1,open:()=>{},close:()=>{}};return L.current.set(r,{...u,...i}),()=>{L.current.delete(r)}},[]),re=n.useCallback(r=>{L.current.delete(r)},[]),se=n.useCallback((r,i)=>{const u=L.current.get(r),o=!!u?.isVisible;u?u.isVisible=!!i:L.current.set(r,{isVisible:!!i,isOpen:()=>!1,open:()=>{},close:()=>{}});const v=L.current.get(r);i&&!o&&(!v?.isOpen||!v.isOpen())&&(b.current=!1,g.current=!0)},[]),E=n.useCallback(()=>{const r=[];for(const[i,u]of L.current.entries())u?.isVisible&&r.push([i,u]);return r},[]),h=n.useCallback(()=>E().length>0,[E]),d=n.useCallback(()=>{const r=E();return r.length?r.every(([,i])=>i.isOpen?.()):!1},[E]),S=n.useCallback(()=>{const r=E();if(!r.length)return!1;let i=!1;for(const[,u]of r)u.isOpen?.()||(u.open?.(),i=!0);return i},[E]),w=n.useCallback(()=>{const r=E();if(!r.length)return!1;const i=r.find(([,u])=>!u.isOpen?.())||r[0];return i?(i[1].open?.(),!0):!1},[E]),D=n.useCallback(()=>a()&&h()&&!d(),[a,h,d]),oe=n.useCallback(()=>a()&&h()&&(!d()||y.current),[a,h,d]),Z=n.useCallback(()=>a()&&(g.current||oe()),[a,oe]),I=n.useCallback(()=>{const r=Date.now();r-he.current<pe||(he.current=r,J==="all"?S():w(),b.current=!1,d()&&(y.current=!0,g.current=!0))},[J,S,w,d]);n.useEffect(()=>{if(!Q){X.current=!0;return}const r=O.current;if(!r)return;const i=new IntersectionObserver(u=>{const o=u[0],v=!!o?.isIntersecting&&(o.intersectionRatio??0)>0;X.current=v,v||(g.current=!1,y.current=!1,b.current=!0,M.current=0)},{threshold:de,rootMargin:R});return i.observe(r),()=>i.disconnect()},[Q,de,R]),n.useEffect(()=>{function r(c){c.defaultPrevented||a()&&c.key==="ArrowDown"&&D()&&(c.preventDefault(),c.stopImmediatePropagation?.(),c.stopPropagation(),I())}function i(c){if(c.defaultPrevented||!a())return;const C=Math.abs(c.deltaX),z=Math.abs(c.deltaY);if(z<=C||c.deltaY<=0)return;const ie=performance.now(),B=M.current||0,F=B+(z-B)*H;M.current=F,j.current=ie;const U=F<V,W=z>=_;if(g.current&&d()&&(y.current=!0),!!Z())if(g.current=!0,c.preventDefault(),c.stopImmediatePropagation?.(),c.stopPropagation(),U){if(b.current=!0,d()&&y.current){y.current=!1,g.current=!1;return}}else W&&b.current&&(I(),b.current=!1)}function u(c){if(c.defaultPrevented||!a()||c.touches.length!==1)return;const C=c.touches[0];A.current=!0,$.current=C.clientY,k.current=C.clientX,M.current=0}function o(c){if(c.defaultPrevented||!a()||!A.current||c.touches.length!==1)return;const C=c.touches[0],z=$.current-C.clientY,ie=k.current-C.clientX,B=Math.abs(z),F=Math.abs(ie);if($.current=C.clientY,k.current=C.clientX,B<=F||z<=0)return;const U=M.current||0,W=U+(B-U)*H;M.current=W;const ue=W<V,we=B>=_;if(g.current&&d()&&(y.current=!0),!!Z())if(g.current=!0,c.preventDefault(),c.stopImmediatePropagation?.(),c.stopPropagation(),ue){if(b.current=!0,d()&&y.current){y.current=!1,g.current=!1;return}}else we&&b.current&&(I(),b.current=!1)}function v(){A.current=!1,y.current||(g.current=!1)}return window.addEventListener("keydown",r,{capture:!0}),window.addEventListener("wheel",i,{capture:!0,passive:!1}),window.addEventListener("touchstart",u,{capture:!0,passive:!1}),window.addEventListener("touchmove",o,{capture:!0,passive:!1}),window.addEventListener("touchend",v,{capture:!0}),window.addEventListener("touchcancel",v,{capture:!0}),()=>{window.removeEventListener("keydown",r,{capture:!0}),window.removeEventListener("wheel",i,{capture:!0}),window.removeEventListener("touchstart",u,{capture:!0}),window.removeEventListener("touchmove",o,{capture:!0}),window.removeEventListener("touchend",v,{capture:!0}),window.removeEventListener("touchcancel",v,{capture:!0})}},[a,D,Z,d,I]);const me=n.useCallback(()=>!1,[]),ce=n.useCallback(()=>!1,[]),G=n.useCallback(()=>{},[]),xe=n.useMemo(()=>({register:Y,unregister:re,setVisible:se,hasVisibleDots:h,areAllVisibleOpen:d,openNextVisibleUnopened:w,openAllVisible:S,tryTriggerOpen:I,presentOverlay:me,replaceOverlay:ce,dismissOverlay:G,threshold:fe,openOnDown:J,isProviderActive:a}),[Y,re,se,h,d,w,S,I,me,ce,G,fe,J,a]);return m.jsx("div",{ref:O,"data-glow-root":!0,children:m.jsx(Ye.Provider,{value:xe,children:ne})})}function ut(){const ne=n.useContext(Ye);if(!ne)throw new Error("useGlowDotController must be used inside <GlowDotProvider>");return ne}const dt=n.forwardRef(function(fe,J){const{top:Q="50%",left:de="50%",size:R=10,color:L="#3ca6a6",title:he,text:pe="Sample fact text goes here.",boxWidth:b=300,className:y="",ariaLabel:g="Info dot",fadeMs:M=220,dotId:j,boxNumber:A,defaultSide:$="auto",defaultGap:k=24,viewportPadding:O=16,defaultOffsetX:X=null,defaultOffsetY:H=null,boundsRef:V=null,absolutePx:_=!1,absX:a=null,absY:Y=null}=fe,{register:re,setVisible:se,threshold:E}=ut(),h=n.useRef(null),d=n.useRef(null),[S,w]=n.useState(!1),[D,oe]=n.useState(!1),[Z,I]=n.useState(!1),[me,ce]=n.useState(!1),[G,xe]=n.useState(!1),[r,i]=n.useState({x:60,y:0}),u=n.useRef(r);n.useEffect(()=>{u.current=r},[r]);const[o,v]=n.useState({w:b,h:0}),c=n.useRef(!1);function C(e){c.current=!0,w(t=>!t),e.preventDefault(),e.stopPropagation()}function z(e){if(c.current){c.current=!1;return}}function ie(e){(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),w(t=>!t))}const[B,F]=n.useState(!1),U=280,W=n.useRef(S);n.useEffect(()=>{W.current=S},[S]),n.useEffect(()=>{if(S)ce(!1),oe(!0);else{I(!1);const e=setTimeout(()=>oe(!1),M),t=setTimeout(()=>xe(!1),M);return()=>{clearTimeout(e),clearTimeout(t)}}},[S,M]);function ue(e){return typeof e=="number"?`${e}px`:e}const we={top:ue(Q),left:ue(de),width:`${R}px`,height:`${R}px`,transform:"translate(-50%, -50%)"};n.useLayoutEffect(()=>{if(!d.current)return;const e=d.current,t=new ResizeObserver(l=>{const f=l[0].contentRect;v({w:f.width,h:f.height})});t.observe(e);const s=e.getBoundingClientRect();return v({w:s.width,h:s.height}),()=>t.disconnect()},[D,b,pe]);function be(){if(V?.current)return V.current.getBoundingClientRect();const e=h.current?.offsetParent;return e&&e instanceof HTMLElement?e.getBoundingClientRect():{left:0,top:0,width:window.innerWidth,height:window.innerHeight,right:window.innerWidth,bottom:window.innerHeight}}function Me(){const e=h.current?.getBoundingClientRect();return e?{cx:e.left+e.width/2,cy:e.top+e.height/2}:null}function ze(){const e=window.innerWidth,t=window.innerHeight;return{left:0,top:0,right:e,bottom:t,width:e,height:t}}function Be(e,t){const s=Math.max(e.left,t.left),l=Math.max(e.top,t.top),f=Math.min(e.right??e.left+e.width,t.right??t.left+t.width),p=Math.min(e.bottom??e.top+e.height,t.bottom??t.top+t.height);return{left:s,top:l,right:f,bottom:p,width:Math.max(0,f-s),height:Math.max(0,p-l)}}function ge(e,t){const s=Me();if(!s)return{x:e,y:t};const l=be(),f=ze(),p=Be(l,f);if(p.width===0||p.height===0)return{x:e,y:t};const P=p.left+O,ae=p.top+O,K=p.right-O,q=p.bottom-O;let N=e,T=t;const x=s.cx+N-o.w/2,le=s.cy+T-o.h/2,Re=x+o.w,Le=le+o.h;return x<P&&(N+=P-x),Re>K&&(N-=Re-K),le<ae&&(T+=ae-le),Le>q&&(T-=Le-q),{x:N,y:T}}function ke(){const e=Me();if(!e)return{x:60,y:0};const t=Number.isFinite(X),s=Number.isFinite(H);if(t||s)return ge(t?X:0,s?H:0);const l=be(),f=l.width??l.right-l.left,{cx:p}=e,P={right:{x:k+o.w/2+R/2,y:0},left:{x:-(k+o.w/2+R/2),y:0},top:{x:0,y:-(k+o.h/2+R/2)},bottom:{x:0,y:k+o.h/2+R/2}};function ae(q){const{cx:N,cy:T}=Me()||{cx:0,cy:0},x=be(),le=x.left,Re=x.top,Le=x.right??x.left+x.width,et=x.bottom??x.top+x.height,{x:tt,y:nt}=ge(q.x,q.y),$e=N+tt-o.w/2,Xe=T+nt-o.h/2,rt=$e+o.w,st=Xe+o.h,ot=Math.max(0,Math.min(rt,Le)-Math.max($e,le)),ct=Math.max(0,Math.min(st,et)-Math.max(Xe,Re));return ot*ct/(o.w*o.h+1e-6)}let K;if($!=="auto")K=$;else{const N=p<l.left+f/2?["right","left","bottom","top"]:["left","right","bottom","top"];K=N.reduce((T,x)=>ae(P[x])>ae(P[T])?x:T,N[0])}return ge(P[K].x,P[K].y)}n.useLayoutEffect(()=>{if(!D||G)return;const e=()=>{if(o.w===0||o.h===0)return requestAnimationFrame(e);i(t=>{const s=ke();return Math.abs(s.x-t.x)<.5&&Math.abs(s.y-t.y)<.5?t:s}),ce(!0),requestAnimationFrame(()=>I(!0))};e()},[D,G,o.w,o.h,$,k,O,V,X,H]),n.useEffect(()=>{if(!D||G)return;const e=()=>{i(t=>{const s=ke();return Math.abs(s.x-t.x)<.5&&Math.abs(s.y-t.y)<.5?t:s})};return window.addEventListener("resize",e),window.addEventListener("orientationchange",e),()=>{window.removeEventListener("resize",e),window.removeEventListener("orientationchange",e)}},[D,G,o.w,o.h,$,k,O,V,X,H]);const ve=n.useRef({on:!1,sx:0,sy:0,bx:0,by:0,frame:null,nx:0,ny:0});function De(e){const t=ve.current;t.on=!0,t.sx="touches"in e?e.touches[0].clientX:e.clientX,t.sy="touches"in e?e.touches[0].clientY:e.clientY,t.bx=u.current.x,t.by=u.current.y,t.nx=t.bx,t.ny=t.by,F(!1),xe(!0),e.preventDefault(),e.stopPropagation()}function Fe(){const e=ve.current;e.frame||(e.frame=requestAnimationFrame(()=>{i({x:e.nx,y:e.ny}),e.frame=null}))}function ye(e){const t=ve.current;if(!t.on)return;const s="touches"in e?e.touches[0].clientX:e.clientX,l="touches"in e?e.touches[0].clientY:e.clientY;t.nx=t.bx+(s-t.sx),t.ny=t.by+(l-t.sy),Fe(),e.preventDefault(),e.stopPropagation()}function Ee(e){const t=ve.current;if(!t.on)return;t.on=!1,t.frame&&(cancelAnimationFrame(t.frame),t.frame=null),e?.stopPropagation?.();const s={x:t.nx,y:t.ny},l=ge(s.x,s.y);Math.abs(l.x-s.x)>.5||Math.abs(l.y-s.y)>.5?(F(!0),i(l),setTimeout(()=>F(!1),U)):i(s)}n.useEffect(()=>(window.addEventListener("mousemove",ye),window.addEventListener("mouseup",Ee),window.addEventListener("touchmove",ye,{passive:!1}),window.addEventListener("touchend",Ee),()=>{window.removeEventListener("mousemove",ye),window.removeEventListener("mouseup",Ee),window.removeEventListener("touchmove",ye),window.removeEventListener("touchend",Ee)}),[]);const ee={x:R/2,y:R/2},te={x:r.x+o.w/2,y:r.y+o.h/2},Se=Math.min(ee.x,te.x),Ce=Math.min(ee.y,te.y),Ne=Math.max(1,Math.abs(te.x-ee.x)),Oe=Math.max(1,Math.abs(te.y-ee.y)),We=ee.x-Se,He=ee.y-Ce,Ve=te.x-Se,_e=te.y-Ce,Ge={backgroundColor:L},Ue={backgroundColor:L},Ie=Z?"opacity-100":"opacity-0",Te={transition:`opacity ${M}ms ease`},je=me?{}:{opacity:0,visibility:"hidden"},Ke=Z?"pointer-events-auto":"pointer-events-none",qe=B?{transition:`transform ${U}ms cubic-bezier(0.2, 0.8, 0.2, 1)`}:{},[Pe,Ae]=n.useState(null);function Je(){if(!(_&&Number.isFinite(a)&&Number.isFinite(Y)))return null;const e=h.current?.offsetParent;if(e&&e instanceof HTMLElement){const t=e.getBoundingClientRect();return{left:a-t.left,top:Y-t.top}}return{left:a,top:Y}}n.useLayoutEffect(()=>{if(!(_&&Number.isFinite(a)&&Number.isFinite(Y))){Ae(null);return}const e=()=>Ae(Je());e(),window.addEventListener("resize",e),window.addEventListener("scroll",e,{passive:!0});const t=[],s=h.current?.offsetParent||h.current?.parentElement,l=p=>{if(!(p instanceof HTMLElement))return!1;const P=getComputedStyle(p);return/(auto|scroll)/.test(`${P.overflow}${P.overflowY}${P.overflowX}`)};let f=s;for(;f&&f!==document.body&&f!==document.documentElement;)l(f)&&(f.addEventListener("scroll",e,{passive:!0}),t.push(f)),f=f.parentElement;return()=>{window.removeEventListener("resize",e),window.removeEventListener("scroll",e),t.forEach(p=>p.removeEventListener("scroll",e))}},[_,a,Y]);const Qe=_&&Pe?{...we,top:`${Pe.top}px`,left:`${Pe.left}px`}:we,Ze=A!=null&&String(A).length>0;return n.useImperativeHandle(J,()=>({open:()=>w(!0),close:()=>w(!1),isOpen:()=>W.current}),[]),n.useEffect(()=>j?re(j,{open:()=>w(!0),close:()=>w(!1),isOpen:()=>W.current,getRect:()=>h.current?.getBoundingClientRect()??null}):void 0,[j,re]),n.useEffect(()=>{if(!h.current||!j)return;const e=new IntersectionObserver(t=>{const s=t[0];se(j,s.isIntersecting&&s.intersectionRatio>=E)},{threshold:E});return e.observe(h.current),()=>e.disconnect()},[j,se,E]),m.jsxs("div",{ref:h,className:`absolute ${y}`,style:Qe,children:[D&&m.jsx("svg",{className:`absolute pointer-events-none z-10 ${Ie}`,style:{left:Se,top:Ce,width:Ne,height:Oe,...Te,...je},viewBox:`0 0 ${Ne} ${Oe}`,children:m.jsx("line",{x1:We,y1:He,x2:Ve,y2:_e,stroke:"#374151",strokeWidth:"1.25",strokeLinecap:"round"})}),m.jsx("div",{className:"absolute -inset-2 rounded-full blur-md opacity-70 animate-pulse pointer-events-none z-20",style:Ue}),m.jsx("button",{type:"button",className:"absolute inset-0 rounded-full shadow-[0_0_6px_1px_rgba(0,0,0,0.25)] outline-none focus:outline-none z-30",style:Ge,"aria-label":g,"aria-expanded":S,onMouseEnter:()=>w(!0),onFocus:()=>w(!0),onClick:z,onTouchStart:C,onKeyDown:ie}),Ze&&m.jsx("div",{className:"absolute left-1/2 top-full -translate-x-1/2 mt-1 z-40",children:m.jsx("span",{className:"inline-flex h-6 min-w-6 px-2 items-center justify-center rounded-full bg-[#0c1a22]/85 text-white/90 text-xs font-medium pointer-events-none",children:String(A)})}),D&&m.jsx("div",{ref:d,className:`absolute rounded-2xl bg-[#0c1a22]/85 text-white/90 cursor-move z-40 will-change-transform ${Ie} ${Ke}`,style:{width:b,transform:`translate3d(${r.x}px, ${r.y}px, 0)`,...Te,...qe,...je},onMouseDown:De,onTouchStart:De,children:m.jsxs("div",{className:"relative p-4 pt-3 pr-3",children:[m.jsx("button",{type:"button","aria-label":"Close textbox",className:"absolute top-2 right-2 inline-flex h-7 w-7 items-center justify-center rounded-md",style:{color:"#a9b3b8"},onClick:e=>{e.stopPropagation(),w(!1)},onMouseDown:e=>e.stopPropagation(),onTouchStart:e=>e.stopPropagation(),children:m.jsx(it,{className:"h-4 w-4"})}),m.jsx("div",{className:"h-4"}),m.jsx("p",{className:"text-center text-base sm:text-lg md:text-xl lg:text-2xl leading-snug text-[#f8da9c]",children:he}),m.jsx("p",{className:"text-center text-base sm:text-lg md:text-xl lg:text-2xl leading-snug",children:pe})]})})]})});export{ft as G,dt as a};
