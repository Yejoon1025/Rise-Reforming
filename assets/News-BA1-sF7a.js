import{r as o,j as s}from"./index-BhjPLE3a.js";import{C as Ce,b as ce,o as Me,n as ke}from"./NewsItems-BK2o9AAo.js";import{N as _e}from"./Navbar-qGPCwOr9.js";import"./createLucideIcon-svdGauXJ.js";const $e=768,V=24,Pe=16,$=1.25;function Ye({items:c=[],backgroundUrl:a,overlayUrl:l,color:d="#3ca6a6",progressColor:T,dotSize:b=12,cardWidth:R=420,className:y="",pushFactor:Y=.47}){const p=o.useRef(null),x=o.useRef([]),D=o.useRef(null),[ae,ue]=o.useState(0),[Z,le]=o.useState(R),[fe,K]=o.useState(0),[H,de]=o.useState(0),[he,me]=o.useState(0),m=o.useRef(!1),h=o.useRef(null),[pe,ge]=o.useState(!1),[J,we]=o.useState(!0),[z,O]=o.useState(!1),A=o.useRef(0),Q=o.useRef(0),M=o.useRef(0),k=o.useRef(0),g=o.useRef(null),be=o.useRef(null),[xe,ee]=o.useState(!1),C=o.useRef(null),[v,ve]=o.useState(!1),B=ze(b,V),Te=.22,Re=.28,te=T||d,E=6,ne=2,ye=48,Ee=36;o.useEffect(()=>()=>{C.current&&clearTimeout(C.current)},[]),o.useEffect(()=>{if(!D.current)return;const e=D.current,t=new ResizeObserver(r=>{const i=r[0].contentRect;K(i.height||0)});t.observe(e);const n=e.getBoundingClientRect();return K(n.height||0),()=>t.disconnect()},[Z,c.length]),o.useEffect(()=>{function e(){const t=p.current,n=window.innerHeight;if(!t||!n)return;const r=t.getBoundingClientRect(),i=Math.max(0,t.scrollHeight-n),u=q(-r.top,0,i),f=n/2,w=Math.max(0,f-u);de(w),me(Math.max(0,Math.min(f,f-w)));const j=window.innerWidth,L=j<$e;ve(L),le(He(j,R,{isNarrow:L,mobileLeftReserve:B,rightGutter:Pe})),ge(window.scrollY>100);const I=window.scrollY<=ne;we(I),I&&z&&O(!1),h.current&&clearTimeout(h.current),h.current=setTimeout(()=>{m.current=!1;const se=g.current;if(Number.isInteger(se)){g.current=null,S(se);return}const Ae=ie(x.current,n);je(Ae,n)},140)}return e(),window.addEventListener("scroll",e,{passive:!0}),window.addEventListener("resize",e),window.addEventListener("orientationchange",e),()=>{window.removeEventListener("scroll",e),window.removeEventListener("resize",e),window.removeEventListener("orientationchange",e),h.current&&clearTimeout(h.current)}},[R,z,B]),o.useEffect(()=>{const e=t=>{const n=t.key;if(n!=="ArrowDown"&&n!=="PageDown"&&n!=="ArrowUp"&&n!=="PageUp")return;const r=p.current?.getBoundingClientRect();if(!(r&&r.top<window.innerHeight&&r.bottom>0)||(t.preventDefault(),m.current))return;const u=r.top>E,f=Math.abs(r.top)<=E;return n==="ArrowUp"||n==="PageUp"?f?_(!0):N(-1):u?W(r.top):N(1)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[c.length]);const Ne=40,Se=120,G=o.useRef(0),U=o.useRef(0);o.useEffect(()=>{const e=t=>{const n=p.current?.getBoundingClientRect();if(!n||!(n.top<window.innerHeight&&n.bottom>0))return;if(m.current){t.preventDefault();return}const i=Math.abs(t.deltaY),u=t.timeStamp||performance.now(),f=U.current?u-U.current:16;U.current=u;const w=1-Math.exp(-f/Se);if(G.current=(1-w)*G.current+w*i,G.current<=Ne){t.preventDefault(),A.current=0;return}if(A.current+=t.deltaY,Math.abs(A.current)<ye){t.preventDefault();return}const j=A.current>0;A.current=0,t.preventDefault();const L=n.top>E,I=Math.abs(n.top)<=E;return j?L?W(n.top):N(1):I?_(!0):N(-1)};return window.addEventListener("wheel",e,{passive:!1}),()=>window.removeEventListener("wheel",e)},[c.length]),o.useEffect(()=>{const e=p.current;if(!e)return;const t=i=>{X(p.current)&&(Q.current=i.touches[0]?.clientY||0,M.current=0)},n=i=>{if(!X(p.current))return;if(m.current){i.preventDefault();return}const u=i.touches[0]?.clientY||0;M.current=Q.current-u,i.preventDefault()},r=()=>{if(!X(p.current)||m.current)return;const i=M.current;if(M.current=0,Math.abs(i)<Ee)return;const u=p.current.getBoundingClientRect(),f=u.top>E,w=Math.abs(u.top)<=E;return i>0?f?W(u.top):N(1):w?_(!0):N(-1)};return e.addEventListener("touchstart",t,{passive:!0}),e.addEventListener("touchmove",n,{passive:!1}),e.addEventListener("touchend",r,{passive:!0}),e.addEventListener("touchcancel",r,{passive:!0}),()=>{e.removeEventListener("touchstart",t),e.removeEventListener("touchmove",n),e.removeEventListener("touchend",r),e.removeEventListener("touchcancel",r)}},[c.length]),o.useEffect(()=>{if(!x.current.length)return;const e=new IntersectionObserver(t=>{for(const n of t){if(!n.isIntersecting)continue;const r=Number(n.target.getAttribute("data-idx"));Number.isNaN(r)||(m.current?g.current=r:S(r))}},{root:null,rootMargin:"-48% 0px -48% 0px",threshold:[.01]});return x.current.forEach((t,n)=>{t&&(t.setAttribute("data-idx",String(n)),e.observe(t))}),be.current=e,()=>e.disconnect()},[c.length]);function W(e){ee(!0),C.current&&clearTimeout(C.current),C.current=setTimeout(()=>ee(!1),900),m.current=!0,window.scrollTo({top:window.scrollY+e,behavior:"smooth"}),h.current&&clearTimeout(h.current),h.current=setTimeout(()=>{m.current=!1},420)}function N(e){const t=window.innerHeight,n=ie(x.current,t),r=q(n+e,0,c.length-1);if(r===n)return;const i=x.current[r];if(!i)return;m.current=!0;const u=window.scrollY+i.getBoundingClientRect().top;g.current=r,window.scrollTo({top:u,behavior:"smooth"}),h.current&&clearTimeout(h.current),h.current=setTimeout(()=>{m.current=!1;const f=Number.isInteger(g.current)?g.current:r;g.current=null,S(f)},420)}function _(e=!1){e&&O(!0),m.current=!0,g.current=0,window.scrollTo({top:0,behavior:"smooth"}),h.current&&clearTimeout(h.current),h.current=setTimeout(()=>{m.current=!1;const t=Number.isInteger(g.current)?g.current:0;g.current=null,S(t),e&&window.scrollY>ne&&O(!1)},500)}function S(e){if(e===k.current){re(e);return}k.current=e,ue(e),requestAnimationFrame(()=>re(e))}function re(e){const t=x.current[e];if(!t)return;let n=t.querySelector("[data-card]")||t.querySelector('a[href],button,textarea,input,select,[tabindex]:not([tabindex="-1"])');n||(n=t),n.getAttribute&&n.getAttribute("tabindex")===null&&n.tagName==="DIV"&&n.setAttribute("tabindex","0");try{n.focus({preventScroll:!0})}catch{n.focus()}}function je(e,t){const n=t/2,r=x.current[k.current],i=x.current[e];if(!i)return S(e);const u=Math.abs(P(i)-n),f=r?Math.abs(P(r)-n):1/0,w=t/2*Te;u+w<f&&S(e)}function Le(e){const t=window.innerHeight,n=x.current[e];if(!t||!n)return e===k.current;const r=t/2;return Math.abs(P(n)-r)<=t/2*Re}const F="left-1/2 -translate-x-1/2",oe={left:V},Ie={left:V+$/2};return s.jsxs("section",{ref:p,className:`relative z-10 w-full ${y}`,style:{backgroundImage:`url(${a})`,backgroundSize:"cover",backgroundPosition:"center",backgroundAttachment:"fixed"},"aria-label":"Timeline",children:[l?s.jsx("img",{src:l,alt:"Bright","aria-hidden":!0,className:`fixed inset-0 h-screen w-screen object-cover pointer-events-none z-0 transition-opacity duration-700 ease-in-out ${J?"opacity-0":"opacity-100"}`}):null,s.jsx("div",{className:"pointer-events-none absolute inset-0",children:s.jsxs("div",{className:"sticky top-0 h-screen w-full",children:[s.jsx("div",{className:`absolute bg-[#374151] ${v?"":F}`,style:{...v?oe:{},top:H,height:`calc(100vh - ${H}px)`,width:`${$}px`},"aria-hidden":!0}),s.jsx("div",{className:`absolute ${v?"":F}`,style:{...v?oe:{},...v?{bottom:"50%"}:{top:H},height:he,width:`${$}px`,background:te,boxShadow:`0 0 10px ${De(te,.55)}`},"aria-hidden":!0}),s.jsxs("div",{className:`absolute top-1/2 -translate-y-1/2 ${v?"-translate-x-1/2":F}`,style:{...v?Ie:{},width:b,height:b},"aria-hidden":!0,children:[s.jsx("div",{className:"absolute -inset-2 rounded-full blur-md opacity-70 animate-pulse pointer-events-none z-10",style:{backgroundColor:d}}),s.jsx("div",{className:"absolute inset-0 rounded-full shadow-[0_0_6px_1px_rgba(0,0,0,0.25)] z-20",style:{backgroundColor:d}})]})]})}),s.jsx("div",{role:"list",children:c.map((e,t)=>{const n=Le(t)||t===0&&xe,r=t===ae,i=e.href?"a":"div",u=e.href?{href:e.href,target:e.target||"_blank",rel:"noopener noreferrer","aria-label":e.ariaLabel||`Open ${e.title||e.date}`}:{},f=t===0,w=q(Y,0,1),L=f&&(J||z)?fe*w:0;return s.jsx("article",{ref:I=>x.current[t]=I,role:"listitem",className:"min-h-screen w-full","data-idx":t,children:s.jsxs("div",{className:"grid min-h-screen w-full items-center md:grid-cols-2",style:v?{paddingLeft:B}:void 0,children:[s.jsx("div",{className:"hidden md:flex justify-end pr-8",children:s.jsx("time",{className:`select-none font-sans text-xl md:text-2xl transition-opacity z-20 ${n?"text-white/80":"text-white/50"}`,children:e.date})}),s.jsx("div",{className:"md:pl-8",children:s.jsxs(i,{...u,ref:f?D:null,"data-card":!0,"aria-current":r?"step":void 0,tabIndex:r?0:-1,className:`block rounded-2xl bg-[#0c1a22]/85 text-[#e0e0e0] shadow-xl backdrop-blur-sm px-4 py-3 select-none
                                transition-[opacity,transform] duration-300 will-change-transform
                                outline-none ring-0 focus:outline-none focus:ring-0 focus-visible:outline-none focus-visible:ring-0
                                ${n?"opacity-100":"opacity-70"}
                                ${e.href?"cursor-pointer hover:opacity-100 focus:opacity-100":""}`,style:{width:Z,transform:`translateY(${L}px)`,WebkitTapHighlightColor:"transparent"},children:[v&&e.date?s.jsx("time",{className:"block mb-1 text-sm font-medium tracking-wide text-white/70",children:e.date}):null,e.title?s.jsx("h3",{className:"mb-2 font-bahnschrift text-2xl md:text-3xl text-[#f8da9c]",children:e.title}):null,s.jsx("p",{className:"text-base sm:text-lg md:text-xl lg:text-2xl leading-snug",children:e.body}),e.href?s.jsx("p",{className:"mt-2 text-sm text-white/60",children:"Click to learn more"}):null,e.image?.src?s.jsx("img",{src:e.image.src,alt:e.image.alt||"",loading:"lazy",className:"mt-3 w-full h-auto rounded-2xl object-cover"}):null]})})]})},e.id||t)})}),s.jsx("button",{type:"button",onClick:()=>_(!0),"aria-label":"Back to top",className:`fixed bottom-6 right-6 z-50 text-white/80 transition-opacity duration-200
                    ${pe?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"} 
                    hover:text-white focus:outline-none focus:ring-0`,style:{background:"transparent",border:"none"},children:s.jsx(Ce,{className:"h-6 w-6 animate-bounce","aria-hidden":!0})})]})}function q(c,a,l){return Math.max(a,Math.min(l,c))}function P(c){const a=c.getBoundingClientRect();return a.top+a.height/2}function ie(c,a){const l=a/2;let d=0,T=1/0;return c.forEach((b,R)=>{if(!b)return;const y=Math.abs(P(b)-l);y<T&&(T=y,d=R)}),d}function De(c,a=1){const l=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(c);if(!l)return`rgba(64,213,209,${a})`;const d=parseInt(l[1],16),T=parseInt(l[2],16),b=parseInt(l[3],16);return`rgba(${d},${T},${b},${a})`}function He(c,a,l={}){const{isNarrow:d=!1,mobileLeftReserve:T=0,rightGutter:b=16}=l,R=32,y=$;if(d){const p=Math.max(220,c-T-b);return Math.min(a,p)}const Y=Math.max(220,c/2-R-y);return Math.min(a,Y)}function ze(c,a){return a+c/2+8+12}function X(c){if(!c)return!1;const a=c.getBoundingClientRect();return a.top<window.innerHeight&&a.bottom>0}function We(){const c=o.useRef(null),[a,l]=o.useState(!0);return o.useEffect(()=>{const d=()=>{window.scrollY>0?l(!1):l(!0)};return window.addEventListener("scroll",d),()=>window.removeEventListener("scroll",d)},[]),s.jsxs("div",{className:"min-h-screen w-full relative",style:{backgroundImage:`url(${ce})`,backgroundSize:"cover",backgroundPosition:"center",backgroundAttachment:"fixed"},children:[s.jsx("header",{className:"relative z-30 transition-opacity duration-500",style:{opacity:a?1:0},children:s.jsx(_e,{})}),s.jsx("section",{className:"relative z-20 flex min-h-[40vh] items-center justify-center px-6",children:s.jsx("h1",{className:"font-bahnschrift text-4xl md:text-6xl text-[#e0e0e0] px-6 text-center leading-tight absolute top-[30vh]",children:"The Rise Reforming Timeline"})}),s.jsx("section",{ref:c,className:"relative z-10",children:s.jsx(Ye,{items:ke,backgroundUrl:ce,overlayUrl:Me,color:"#3ca6a6",dotSize:12,cardWidth:420})})]})}export{We as default};
