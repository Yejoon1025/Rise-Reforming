import{r,j as o}from"./index-DtGxoI7A.js";import{b as ae,o as ze}from"./NewLight-DRceV-Rt.js";import{C as Pe}from"./chevron-down-17rM6L80.js";import{C as Ye}from"./chevron-up-CLfXw92I.js";import{c as He}from"./createLucideIcon-yhgLKQAl.js";import{N as Be}from"./Navbar-CVIVLmy0.js";/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=[["path",{d:"m17 11-5-5-5 5",key:"e8nh98"}],["path",{d:"m17 18-5-5-5 5",key:"2avn1x"}]],Ue=He("chevrons-up",Oe),We=768,X=24,Fe=16,P=1.25;function Ge({items:c=[],backgroundUrl:a,overlayUrl:l,color:m="#3ca6a6",progressColor:y,dotSize:p=12,cardWidth:T=420,className:R="",pushFactor:N=.47}){const d=r.useRef(null),w=r.useRef([]),b=r.useRef(null),[H,le]=r.useState(0),[J,de]=r.useState(T),[fe,Q]=r.useState(0),[B,he]=r.useState(0),[me,pe]=r.useState(0),g=r.useRef(!1),h=r.useRef(null),[Ke,we]=r.useState(!1),[$,ge]=r.useState(!0),[O,U]=r.useState(!1),[be,xe]=r.useState(!1),I=r.useRef(0),ee=r.useRef(0),_=r.useRef(0),D=r.useRef(0),x=r.useRef(null),ve=r.useRef(null),[ye,te]=r.useState(!1),M=r.useRef(null),[E,Te]=r.useState(!1),W=Xe(p,X),Re=.22,Ee=.28,ne=y||m,j=6,re=2,Ne=48,je=36;r.useEffect(()=>()=>{M.current&&clearTimeout(M.current)},[]),r.useEffect(()=>{if(!b.current)return;const e=b.current,t=new ResizeObserver(s=>{const i=s[0].contentRect;Q(i.height||0)});t.observe(e);const n=e.getBoundingClientRect();return Q(n.height||0),()=>t.disconnect()},[J,c.length]),r.useEffect(()=>{function e(){const t=d.current,n=window.innerHeight;if(!t||!n)return;const s=t.getBoundingClientRect(),i=Math.max(0,t.scrollHeight-n),u=Z(-s.top,0,i),f=n/2,v=Math.max(0,f-u);he(v),pe(Math.max(0,Math.min(f,f-v)));const A=window.innerWidth,C=A<We;Te(C),de(qe(A,T,{isNarrow:C,mobileLeftReserve:W,rightGutter:Fe})),we(window.scrollY>100);const k=window.scrollY<=re;ge(k),k&&O&&U(!1);const $e=document.documentElement,_e=window.innerHeight+window.scrollY>=$e.scrollHeight-2;xe(_e),h.current&&clearTimeout(h.current),h.current=setTimeout(()=>{g.current=!1;const ie=x.current;if(Number.isInteger(ie)){x.current=null,L(ie);return}const De=ue(w.current,n);ke(De,n)},140)}return e(),window.addEventListener("scroll",e,{passive:!0}),window.addEventListener("resize",e),window.addEventListener("orientationchange",e),()=>{window.removeEventListener("scroll",e),window.removeEventListener("resize",e),window.removeEventListener("orientationchange",e),h.current&&clearTimeout(h.current)}},[T,O,W]),r.useEffect(()=>{const e=t=>{const n=t.key;if(n!=="ArrowDown"&&n!=="PageDown"&&n!=="ArrowUp"&&n!=="PageUp")return;const s=d.current?.getBoundingClientRect();if(!(s&&s.top<window.innerHeight&&s.bottom>0)||(t.preventDefault(),g.current))return;const u=s.top>j,f=Math.abs(s.top)<=j;return n==="ArrowUp"||n==="PageUp"?f?z(!0):S(-1):u?V(s.top):S(1)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[c.length]);const Se=40,Le=120,F=r.useRef(0),G=r.useRef(0);r.useEffect(()=>{const e=t=>{t.preventDefault()};return window.addEventListener("wheel",e,{passive:!1}),()=>window.removeEventListener("wheel",e)},[]),r.useEffect(()=>{const e=t=>{const n=d.current?.getBoundingClientRect();if(!n||!(n.top<window.innerHeight&&n.bottom>0))return;if(g.current){t.preventDefault();return}const i=Math.abs(t.deltaY),u=t.timeStamp||performance.now(),f=G.current?u-G.current:16;G.current=u;const v=1-Math.exp(-f/Le);if(F.current=(1-v)*F.current+v*i,F.current<=Se){t.preventDefault(),I.current=0;return}if(I.current+=t.deltaY,Math.abs(I.current)<Ne){t.preventDefault();return}const A=I.current>0;I.current=0,t.preventDefault();const C=n.top>j,k=Math.abs(n.top)<=j;return A?C?V(n.top):S(1):k?z(!0):S(-1)};return window.addEventListener("wheel",e,{passive:!1}),()=>window.removeEventListener("wheel",e)},[c.length]),r.useEffect(()=>{const e=d.current;if(!e)return;const t=i=>{K(d.current)&&(ee.current=i.touches[0]?.clientY||0,_.current=0)},n=i=>{if(!K(d.current))return;if(g.current){i.preventDefault();return}const u=i.touches[0]?.clientY||0;_.current=ee.current-u,i.preventDefault()},s=()=>{if(!K(d.current)||g.current)return;const i=_.current;if(_.current=0,Math.abs(i)<je)return;const u=d.current.getBoundingClientRect(),f=u.top>j,v=Math.abs(u.top)<=j;return i>0?f?V(u.top):S(1):v?z(!0):S(-1)};return e.addEventListener("touchstart",t,{passive:!0}),e.addEventListener("touchmove",n,{passive:!1}),e.addEventListener("touchend",s,{passive:!0}),e.addEventListener("touchcancel",s,{passive:!0}),()=>{e.removeEventListener("touchstart",t),e.removeEventListener("touchmove",n),e.removeEventListener("touchend",s),e.removeEventListener("touchcancel",s)}},[c.length]),r.useEffect(()=>{if(!w.current.length)return;const e=new IntersectionObserver(t=>{for(const n of t){if(!n.isIntersecting)continue;const s=Number(n.target.getAttribute("data-idx"));Number.isNaN(s)||(g.current?x.current=s:L(s))}},{root:null,rootMargin:"-48% 0px -48% 0px",threshold:[.01]});return w.current.forEach((t,n)=>{t&&(t.setAttribute("data-idx",String(n)),e.observe(t))}),ve.current=e,()=>e.disconnect()},[c.length]);function V(e){te(!0),M.current&&clearTimeout(M.current),M.current=setTimeout(()=>te(!1),900),g.current=!0,window.scrollTo({top:window.scrollY+e,behavior:"smooth"}),h.current&&clearTimeout(h.current),h.current=setTimeout(()=>{g.current=!1},420)}function S(e){const t=window.innerHeight,n=ue(w.current,t),s=Z(n+e,0,c.length-1);if(s===n)return;const i=w.current[s];if(!i)return;g.current=!0;const u=window.scrollY+i.getBoundingClientRect().top;x.current=s,window.scrollTo({top:u,behavior:"smooth"}),h.current&&clearTimeout(h.current),h.current=setTimeout(()=>{g.current=!1;const f=Number.isInteger(x.current)?x.current:s;x.current=null,L(f)},420)}function z(e=!1){e&&U(!0),g.current=!0,x.current=0,window.scrollTo({top:0,behavior:"smooth"}),h.current&&clearTimeout(h.current),h.current=setTimeout(()=>{g.current=!1;const t=Number.isInteger(x.current)?x.current:0;x.current=null,L(t),e&&window.scrollY>re&&U(!1)},500)}function oe(e){const t=new KeyboardEvent("keydown",{key:e,code:e,bubbles:!0});window.dispatchEvent(t)}function Ae(){oe("ArrowUp")}function Ce(){oe("ArrowDown")}function L(e){if(e===D.current){se(e);return}D.current=e,le(e),requestAnimationFrame(()=>se(e))}function se(e){const t=w.current[e];if(!t)return;let n=t.querySelector("[data-card]")||t.querySelector('a[href],button,textarea,input,select,[tabindex]:not([tabindex="-1"])');n||(n=t),n.getAttribute&&n.getAttribute("tabindex")===null&&n.tagName==="DIV"&&n.setAttribute("tabindex","0");try{n.focus({preventScroll:!0})}catch{n.focus()}}function ke(e,t){const n=t/2,s=w.current[D.current],i=w.current[e];if(!i)return L(e);const u=Math.abs(Y(i)-n),f=s?Math.abs(Y(s)-n):1/0,v=t/2*Re;u+v<f&&L(e)}function Ie(e){const t=window.innerHeight,n=w.current[e];if(!t||!n)return e===D.current;const s=t/2;return Math.abs(Y(n)-s)<=t/2*Ee}const q="left-1/2 -translate-x-1/2",ce={left:X},Me={left:X+P/2};return o.jsxs("section",{ref:d,className:`relative z-10 w-full ${R}`,style:{backgroundImage:`url(${a})`,backgroundSize:"cover",backgroundPosition:"center",backgroundAttachment:"fixed"},"aria-label":"Timeline",children:[l?o.jsx("img",{src:l,alt:"Bright","aria-hidden":!0,className:`fixed inset-0 h-screen w-screen object-cover pointer-events-none z-0 transition-opacity duration-700 ease-in-out ${$?"opacity-0":"opacity-100"}`}):null,o.jsx("div",{className:"pointer-events-none absolute inset-0",children:o.jsxs("div",{className:"sticky top-0 h-screen w-full",children:[o.jsx("div",{className:`absolute bg-[#374151] ${E?"":q}`,style:{...E?ce:{},top:B,height:`calc(100vh - ${B}px)`,width:`${P}px`},"aria-hidden":!0}),o.jsx("div",{className:`absolute ${E?"":q}`,style:{...E?ce:{},...E?{bottom:"50%"}:{top:B},height:me,width:`${P}px`,background:ne,boxShadow:`0 0 10px ${Ve(ne,.55)}`},"aria-hidden":!0}),o.jsxs("div",{className:`absolute top-1/2 -translate-y-1/2 ${E?"-translate-x-1/2":q}`,style:{...E?Me:{},width:p,height:p},"aria-hidden":!0,children:[o.jsx("div",{className:"absolute -inset-2 rounded-full blur-md opacity-70 animate-pulse pointer-events-none z-10",style:{backgroundColor:m}}),o.jsx("div",{className:"absolute inset-0 rounded-full shadow-[0_0_6px_1px_rgba(0,0,0,0.25)] z-20",style:{backgroundColor:m}})]})]})}),o.jsx("div",{role:"list",children:c.map((e,t)=>{const n=Ie(t)||t===0&&ye,s=t===H,i=e.href?"a":"div",u=e.href?{href:e.href,target:e.target||"_blank",rel:"noopener noreferrer","aria-label":e.ariaLabel||`Open ${e.title||e.date}`}:{},f=t===0,v=Z(N,0,1),C=f&&($||O)?fe*v:0;return o.jsx("article",{ref:k=>w.current[t]=k,role:"listitem",className:"min-h-screen w-full","data-idx":t,children:o.jsxs("div",{className:"grid min-h-screen w-full items-center md:grid-cols-2",style:E?{paddingLeft:W}:void 0,children:[o.jsx("div",{className:"hidden md:flex justify-end pr-8",children:o.jsx("time",{className:`select-none font-sans text-xl md:text-2xl transition-opacity z-20 ${n?"text-white/80":"text-white/50"}`,children:e.date})}),o.jsx("div",{className:"md:pl-8",children:o.jsxs(i,{...u,ref:f?b:null,"data-card":!0,"aria-current":s?"step":void 0,tabIndex:s?0:-1,className:`block rounded-2xl bg-[#0c1a22]/85 text-[#e0e0e0] shadow-xl backdrop-blur-sm px-4 py-3 select-none
                                transition-[opacity,transform] duration-300 will-change-transform
                                outline-none ring-0 focus:outline-none focus:ring-0 focus-visible:outline-none focus-visible:ring-0
                                ${n?"opacity-100":"opacity-70"}
                                ${e.href?"cursor-pointer hover:opacity-100 focus:opacity-100":""}`,style:{width:J,transform:`translateY(${C}px)`,WebkitTapHighlightColor:"transparent"},children:[E&&e.date?o.jsx("time",{className:"block mb-1 text-sm font-medium tracking-wide text-white/70",children:e.date}):null,e.title?o.jsx("h3",{className:"mb-2 font-bahnschrift text-2xl md:text-3xl text-[#f8da9c]",children:e.title}):null,o.jsx("p",{className:"text-base sm:text-lg md:text-xl lg:text-2xl leading-snug",children:e.body}),e.href?o.jsx("p",{className:"mt-2 text-sm text-white/60",children:"Click to learn more"}):null,e.image?.src?o.jsx("img",{src:e.image.src,alt:e.image.alt||"",loading:"lazy",className:"mt-3 w-full h-auto rounded-2xl object-cover"}):null]})})]})},e.id||t)})}),o.jsx("button",{type:"button",onClick:()=>Ce(),"aria-label":"Down",className:`fixed bottom-8 right-5 z-50 text-white/80 transition-opacity duration-200
                    ${be?"opacity-0 pointer-events-none":"opacity-100 pointer-events-auto"} 
                    hover:text-white focus:outline-none focus:ring-0`,style:{background:"transparent",border:"none"},children:o.jsx(Pe,{className:"","aria-hidden":!0,size:32})}),o.jsx("button",{type:"button",onClick:()=>Ae(),"aria-label":"Up",className:`fixed bottom-16 right-5 z-50 text-white/80 transition-opacity duration-200
                    ${$?"opacity-0 pointer-events-none":"opacity-100 pointer-events-auto"} 
                    hover:text-white focus:outline-none focus:ring-0`,style:{background:"transparent",border:"none"},children:o.jsx(Ye,{className:"","aria-hidden":!0,size:32})}),o.jsx("button",{type:"button",onClick:()=>z(!0),"aria-label":"Back to top",className:`fixed bottom-24 right-5 z-50 text-white/80 transition-opacity duration-200
                    ${$?"opacity-0 pointer-events-none":"opacity-100 pointer-events-auto"} 
                    hover:text-white focus:outline-none focus:ring-0`,style:{background:"transparent",border:"none"},children:o.jsx(Ue,{className:"","aria-hidden":!0,size:32})})]})}function Z(c,a,l){return Math.max(a,Math.min(l,c))}function Y(c){const a=c.getBoundingClientRect();return a.top+a.height/2}function ue(c,a){const l=a/2;let m=0,y=1/0;return c.forEach((p,T)=>{if(!p)return;const R=Math.abs(Y(p)-l);R<y&&(y=R,m=T)}),m}function Ve(c,a=1){const l=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(c);if(!l)return`rgba(64,213,209,${a})`;const m=parseInt(l[1],16),y=parseInt(l[2],16),p=parseInt(l[3],16);return`rgba(${m},${y},${p},${a})`}function qe(c,a,l={}){const{isNarrow:m=!1,mobileLeftReserve:y=0,rightGutter:p=16}=l,T=32,R=P;if(m){const d=Math.max(220,c-y-p);return Math.min(a,d)}const N=Math.max(220,c/2-T-R);return Math.min(a,N)}function Xe(c,a){return a+c/2+8+12}function K(c){if(!c)return!1;const a=c.getBoundingClientRect();return a.top<window.innerHeight&&a.bottom>0}const Ze="https://raw.githubusercontent.com/Yejoon1025/rise-content/main/News.json";function ot(){const c=r.useRef(null),[a,l]=r.useState(!0),[m,y]=r.useState([]),[p,T]=r.useState(!0),[R,N]=r.useState(null);return r.useEffect(()=>{const d=()=>{window.scrollY>0?l(!1):l(!0)};return window.addEventListener("scroll",d),()=>window.removeEventListener("scroll",d)},[]),r.useEffect(()=>{const d=new AbortController;async function w(){try{T(!0),N(null);const b=await fetch(Ze,{signal:d.signal});if(!b.ok)throw new Error(`Failed to load news: ${b.status} ${b.statusText}`);const H=await b.json();y(H)}catch(b){if(b.name==="AbortError")return;console.error(b),N("Could not load news timeline.")}finally{T(!1)}}return w(),()=>d.abort()},[]),o.jsxs("div",{className:"min-h-screen w-full relative",style:{backgroundImage:`url(${ae})`,backgroundSize:"cover",backgroundPosition:"center",backgroundAttachment:"fixed"},children:[o.jsx("header",{className:"relative z-30 transition-opacity duration-500",style:{opacity:a?1:0},children:o.jsx(Be,{})}),o.jsx("section",{className:"relative z-20 flex min-h-[40vh] items-center justify-center px-6",children:o.jsx("h1",{className:"font-bahnschrift text-4xl md:text-6xl text-[#e0e0e0] px-6 text-center leading-tight absolute top-[30vh]",children:"The Rise Reforming Timeline"})}),o.jsxs("section",{ref:c,className:"relative z-10",children:[p&&o.jsx("div",{className:"py-10 text-center text-sm text-gray-300",children:"Loading timelineâ€¦"}),R&&o.jsx("div",{className:"py-10 text-center text-sm text-red-400",children:R}),!p&&!R&&o.jsx(Ge,{items:m,backgroundUrl:ae,overlayUrl:ze,color:"#3ca6a6",dotSize:12,cardWidth:420})]})]})}export{ot as default};
