import{r,j as o}from"./index-CyolkGpJ.js";import{b as se,o as Ae}from"./NewLight-DRceV-Rt.js";import{C as Ie}from"./chevron-down-DrJIkMRl.js";import{C as $e}from"./chevron-up-BOORqogL.js";import{c as Me}from"./createLucideIcon-a2mSqa_z.js";import{N as _e}from"./Navbar-aE7D9-Vr.js";/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=[["path",{d:"m17 11-5-5-5 5",key:"e8nh98"}],["path",{d:"m17 18-5-5-5 5",key:"2avn1x"}]],Pe=Me("chevrons-up",ze),De=768,W=24,Ye=16,z=1.25;function Be({items:i=[],backgroundUrl:c,overlayUrl:u,color:m="#3ca6a6",progressColor:v,dotSize:p=12,cardWidth:y=420,className:T="",pushFactor:E=.47}){const l=r.useRef(null),g=r.useRef([]),w=r.useRef(null),[D,ce]=r.useState(0),[q,ae]=r.useState(y),[ue,Z]=r.useState(0),[Y,le]=r.useState(0),[de,fe]=r.useState(0),x=r.useRef(!1),f=r.useRef(null),[We,he]=r.useState(!1),[L,me]=r.useState(!0),[B,H]=r.useState(!1),[pe,ge]=r.useState(!1);r.useRef(0);const K=r.useRef(0),C=r.useRef(0),k=r.useRef(0),b=r.useRef(null),we=r.useRef(null),[xe,X]=r.useState(!1),S=r.useRef(null),[N,be]=r.useState(!1),O=Ue(p,W),ve=.22,ye=.28,J=v||m,A=6,Q=2,Te=36;r.useEffect(()=>()=>{S.current&&clearTimeout(S.current)},[]),r.useEffect(()=>{if(!w.current)return;const e=w.current,t=new ResizeObserver(s=>{const a=s[0].contentRect;Z(a.height||0)});t.observe(e);const n=e.getBoundingClientRect();return Z(n.height||0),()=>t.disconnect()},[q,i.length]),r.useEffect(()=>{function e(){const t=l.current,n=window.innerHeight;if(!t||!n)return;const s=t.getBoundingClientRect(),a=Math.max(0,t.scrollHeight-n),d=G(-s.top,0,a),h=n/2,R=Math.max(0,h-d);le(R),fe(Math.max(0,Math.min(h,h-R)));const $=window.innerWidth,M=$<De;be(M),ae(Oe($,y,{isNarrow:M,mobileLeftReserve:O,rightGutter:Ye})),he(window.scrollY>100);const _=window.scrollY<=Q;me(_),_&&B&&H(!1);const Le=document.documentElement,Ce=window.innerHeight+window.scrollY>=Le.scrollHeight-2;ge(Ce),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{x.current=!1;const oe=b.current;if(Number.isInteger(oe)){b.current=null,j(oe);return}const ke=ie(g.current,n);Ee(ke,n)},140)}return e(),window.addEventListener("scroll",e,{passive:!0}),window.addEventListener("resize",e),window.addEventListener("orientationchange",e),()=>{window.removeEventListener("scroll",e),window.removeEventListener("resize",e),window.removeEventListener("orientationchange",e),f.current&&clearTimeout(f.current)}},[y,B,O]),r.useEffect(()=>{const e=t=>{const n=t.key;if(n!=="ArrowDown"&&n!=="PageDown"&&n!=="ArrowUp"&&n!=="PageUp")return;const s=l.current?.getBoundingClientRect();if(!(s&&s.top<window.innerHeight&&s.bottom>0)||(t.preventDefault(),x.current))return;const d=s.top>A,h=Math.abs(s.top)<=A;return n==="ArrowUp"||n==="PageUp"?h?U(!0):I(-1):d?ee(s.top):I(1)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[i.length]),r.useRef(0),r.useRef(0),r.useEffect(()=>{const e=t=>{t.preventDefault()};return window.addEventListener("wheel",e,{passive:!1}),()=>window.removeEventListener("wheel",e)},[]),r.useEffect(()=>{const e=l.current;if(!e)return;const t=a=>{V(l.current)&&(K.current=a.touches[0]?.clientY||0,C.current=0)},n=a=>{if(!V(l.current))return;if(x.current){a.preventDefault();return}const d=a.touches[0]?.clientY||0;C.current=K.current-d,a.preventDefault()},s=()=>{if(!V(l.current)||x.current)return;const a=C.current;if(C.current=0,Math.abs(a)<Te)return;const d=l.current.getBoundingClientRect(),h=d.top>A,R=Math.abs(d.top)<=A;return a>0?h?ee(d.top):I(1):R?U(!0):I(-1)};return e.addEventListener("touchstart",t,{passive:!0}),e.addEventListener("touchmove",n,{passive:!1}),e.addEventListener("touchend",s,{passive:!0}),e.addEventListener("touchcancel",s,{passive:!0}),()=>{e.removeEventListener("touchstart",t),e.removeEventListener("touchmove",n),e.removeEventListener("touchend",s),e.removeEventListener("touchcancel",s)}},[i.length]),r.useEffect(()=>{if(!g.current.length)return;const e=new IntersectionObserver(t=>{for(const n of t){if(!n.isIntersecting)continue;const s=Number(n.target.getAttribute("data-idx"));Number.isNaN(s)||(x.current?b.current=s:j(s))}},{root:null,rootMargin:"-48% 0px -48% 0px",threshold:[.01]});return g.current.forEach((t,n)=>{t&&(t.setAttribute("data-idx",String(n)),e.observe(t))}),we.current=e,()=>e.disconnect()},[i.length]);function ee(e){X(!0),S.current&&clearTimeout(S.current),S.current=setTimeout(()=>X(!1),900),x.current=!0,window.scrollTo({top:window.scrollY+e,behavior:"smooth"}),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{x.current=!1},420)}function I(e){const t=window.innerHeight,n=ie(g.current,t),s=G(n+e,0,i.length-1);if(s===n)return;const a=g.current[s];if(!a)return;x.current=!0;const d=window.scrollY+a.getBoundingClientRect().top;b.current=s,window.scrollTo({top:d,behavior:"smooth"}),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{x.current=!1;const h=Number.isInteger(b.current)?b.current:s;b.current=null,j(h)},420)}function U(e=!1){e&&H(!0),x.current=!0,b.current=0,window.scrollTo({top:0,behavior:"smooth"}),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{x.current=!1;const t=Number.isInteger(b.current)?b.current:0;b.current=null,j(t),e&&window.scrollY>Q&&H(!1)},500)}function te(e){const t=new KeyboardEvent("keydown",{key:e,code:e,bubbles:!0});window.dispatchEvent(t)}function Ne(){te("ArrowUp")}function Re(){te("ArrowDown")}function j(e){if(e===k.current){ne(e);return}k.current=e,ce(e),requestAnimationFrame(()=>ne(e))}function ne(e){const t=g.current[e];if(!t)return;let n=t.querySelector("[data-card]")||t.querySelector('a[href],button,textarea,input,select,[tabindex]:not([tabindex="-1"])');n||(n=t),n.getAttribute&&n.getAttribute("tabindex")===null&&n.tagName==="DIV"&&n.setAttribute("tabindex","0");try{n.focus({preventScroll:!0})}catch{n.focus()}}function Ee(e,t){const n=t/2,s=g.current[k.current],a=g.current[e];if(!a)return j(e);const d=Math.abs(P(a)-n),h=s?Math.abs(P(s)-n):1/0,R=t/2*ve;d+R<h&&j(e)}function je(e){const t=window.innerHeight,n=g.current[e];if(!t||!n)return e===k.current;const s=t/2;return Math.abs(P(n)-s)<=t/2*ye}const F="left-1/2 -translate-x-1/2",re={left:W},Se={left:W+z/2};return o.jsxs("section",{ref:l,className:`relative z-10 w-full ${T}`,style:{backgroundImage:`url(${c})`,backgroundSize:"cover",backgroundPosition:"center",backgroundAttachment:"fixed"},"aria-label":"Timeline",children:[u?o.jsx("img",{src:u,alt:"Bright","aria-hidden":!0,className:`fixed inset-0 h-screen w-screen object-cover pointer-events-none z-0 transition-opacity duration-700 ease-in-out ${L?"opacity-0":"opacity-100"}`}):null,o.jsx("div",{className:"pointer-events-none absolute inset-0",children:o.jsxs("div",{className:"sticky top-0 h-screen w-full",children:[o.jsx("div",{className:`absolute bg-[#374151] ${N?"":F}`,style:{...N?re:{},top:Y,height:`calc(100vh - ${Y}px)`,width:`${z}px`},"aria-hidden":!0}),o.jsx("div",{className:`absolute ${N?"":F}`,style:{...N?re:{},...N?{bottom:"50%"}:{top:Y},height:de,width:`${z}px`,background:J,boxShadow:`0 0 10px ${He(J,.55)}`},"aria-hidden":!0}),o.jsxs("div",{className:`absolute top-1/2 -translate-y-1/2 ${N?"-translate-x-1/2":F}`,style:{...N?Se:{},width:p,height:p},"aria-hidden":!0,children:[o.jsx("div",{className:"absolute -inset-2 rounded-full blur-md opacity-70 animate-pulse pointer-events-none z-10",style:{backgroundColor:m}}),o.jsx("div",{className:"absolute inset-0 rounded-full shadow-[0_0_6px_1px_rgba(0,0,0,0.25)] z-20",style:{backgroundColor:m}})]})]})}),o.jsx("div",{role:"list",children:i.map((e,t)=>{const n=je(t)||t===0&&xe,s=t===D,a=e.href?"a":"div",d=e.href?{href:e.href,target:e.target||"_blank",rel:"noopener noreferrer","aria-label":e.ariaLabel||`Open ${e.title||e.date}`}:{},h=t===0,R=G(E,0,1),M=h&&(L||B)?ue*R:0;return o.jsx("article",{ref:_=>g.current[t]=_,role:"listitem",className:"min-h-screen w-full","data-idx":t,children:o.jsxs("div",{className:"grid min-h-screen w-full items-center md:grid-cols-2",style:N?{paddingLeft:O}:void 0,children:[o.jsx("div",{className:"hidden md:flex justify-end pr-8",children:o.jsx("time",{className:`select-none font-sans text-xl md:text-2xl transition-opacity z-20 ${n?"text-white/80":"text-white/50"}`,children:e.date})}),o.jsx("div",{className:"md:pl-8",children:o.jsxs(a,{...d,ref:h?w:null,"data-card":!0,"aria-current":s?"step":void 0,tabIndex:s?0:-1,className:`block rounded-2xl bg-[#0c1a22]/85 text-[#e0e0e0] shadow-xl backdrop-blur-sm px-4 py-3 select-none
                                transition-[opacity,transform] duration-300 will-change-transform
                                outline-none ring-0 focus:outline-none focus:ring-0 focus-visible:outline-none focus-visible:ring-0
                                ${n?"opacity-100":"opacity-70"}
                                ${e.href?"cursor-pointer hover:opacity-100 focus:opacity-100":""}`,style:{width:q,transform:`translateY(${M}px)`,WebkitTapHighlightColor:"transparent"},children:[N&&e.date?o.jsx("time",{className:"block mb-1 text-sm font-medium tracking-wide text-white/70",children:e.date}):null,e.title?o.jsx("h3",{className:"mb-2 font-bahnschrift text-2xl md:text-3xl text-[#f8da9c]",children:e.title}):null,o.jsx("p",{className:"text-base sm:text-lg md:text-xl lg:text-2xl leading-snug",children:e.body}),e.href?o.jsx("p",{className:"mt-2 text-sm text-white/60",children:"Click to learn more"}):null,e.image?.src?o.jsx("img",{src:e.image.src,alt:e.image.alt||"",loading:"lazy",className:"mt-3 w-full h-auto rounded-2xl object-cover"}):null]})})]})},e.id||t)})}),o.jsx("button",{type:"button",onClick:()=>Re(),"aria-label":"Down",className:`fixed bottom-8 right-5 z-50 text-white/80 transition-opacity duration-200
                    ${pe?"opacity-0 pointer-events-none":"opacity-100 pointer-events-auto"} 
                    hover:text-white focus:outline-none focus:ring-0`,style:{background:"transparent",border:"none"},children:o.jsx(Ie,{className:"","aria-hidden":!0,size:32})}),o.jsx("button",{type:"button",onClick:()=>Ne(),"aria-label":"Up",className:`fixed bottom-16 right-5 z-50 text-white/80 transition-opacity duration-200
                    ${L?"opacity-0 pointer-events-none":"opacity-100 pointer-events-auto"} 
                    hover:text-white focus:outline-none focus:ring-0`,style:{background:"transparent",border:"none"},children:o.jsx($e,{className:"","aria-hidden":!0,size:32})}),o.jsx("button",{type:"button",onClick:()=>U(!0),"aria-label":"Back to top",className:`fixed bottom-24 right-5 z-50 text-white/80 transition-opacity duration-200
                    ${L?"opacity-0 pointer-events-none":"opacity-100 pointer-events-auto"} 
                    hover:text-white focus:outline-none focus:ring-0`,style:{background:"transparent",border:"none"},children:o.jsx(Pe,{className:"","aria-hidden":!0,size:32})})]})}function G(i,c,u){return Math.max(c,Math.min(u,i))}function P(i){const c=i.getBoundingClientRect();return c.top+c.height/2}function ie(i,c){const u=c/2;let m=0,v=1/0;return i.forEach((p,y)=>{if(!p)return;const T=Math.abs(P(p)-u);T<v&&(v=T,m=y)}),m}function He(i,c=1){const u=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(i);if(!u)return`rgba(64,213,209,${c})`;const m=parseInt(u[1],16),v=parseInt(u[2],16),p=parseInt(u[3],16);return`rgba(${m},${v},${p},${c})`}function Oe(i,c,u={}){const{isNarrow:m=!1,mobileLeftReserve:v=0,rightGutter:p=16}=u,y=32,T=z;if(m){const l=Math.max(220,i-v-p);return Math.min(c,l)}const E=Math.max(220,i/2-y-T);return Math.min(c,E)}function Ue(i,c){return c+i/2+8+12}function V(i){if(!i)return!1;const c=i.getBoundingClientRect();return c.top<window.innerHeight&&c.bottom>0}const Fe="https://raw.githubusercontent.com/Yejoon1025/rise-content/main/News.json";function Je(){const i=r.useRef(null),[c,u]=r.useState(!0),[m,v]=r.useState([]),[p,y]=r.useState(!0),[T,E]=r.useState(null);return r.useEffect(()=>{const l=()=>{window.scrollY>0?u(!1):u(!0)};return window.addEventListener("scroll",l),()=>window.removeEventListener("scroll",l)},[]),r.useEffect(()=>{const l=new AbortController;async function g(){try{y(!0),E(null);const w=await fetch(Fe,{signal:l.signal});if(!w.ok)throw new Error(`Failed to load news: ${w.status} ${w.statusText}`);const D=await w.json();v(D)}catch(w){if(w.name==="AbortError")return;console.error(w),E("Could not load news timeline.")}finally{y(!1)}}return g(),()=>l.abort()},[]),o.jsxs("div",{className:"min-h-screen w-full relative",style:{backgroundImage:`url(${se})`,backgroundSize:"cover",backgroundPosition:"center",backgroundAttachment:"fixed"},children:[o.jsx("header",{className:"relative z-30 transition-opacity duration-500",style:{opacity:c?1:0},children:o.jsx(_e,{})}),o.jsx("section",{className:"relative z-20 flex min-h-[40vh] items-center justify-center px-6",children:o.jsx("h1",{className:"font-bahnschrift text-4xl md:text-6xl text-[#e0e0e0] px-6 text-center leading-tight absolute top-[30vh]",children:"The Rise Reforming Timeline"})}),o.jsxs("section",{ref:i,className:"relative z-10",children:[p&&o.jsx("div",{className:"py-10 text-center text-sm text-gray-300",children:"Loading timelineâ€¦"}),T&&o.jsx("div",{className:"py-10 text-center text-sm text-red-400",children:T}),!p&&!T&&o.jsx(Be,{items:m,backgroundUrl:se,overlayUrl:Ae,color:"#3ca6a6",dotSize:12,cardWidth:420})]})]})}export{Je as default};
