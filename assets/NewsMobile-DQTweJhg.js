import{r,j as s}from"./index-D4NbWQlk.js";import{C as Me,b as ie,o as ae,n as _e}from"./NewsItems-Df2qe_mH.js";import{N as ke}from"./MobileNavbar-B-tb9Y-3.js";import"./createLucideIcon-DD6BKc3F.js";import"./index-BnHBB9Mq.js";import"./x-BAKGER_F.js";const $e=768,Z=24,Pe=16,H=1.25;function Ye({items:c=[],backgroundUrl:a,overlayUrl:h,color:u="#3ca6a6",progressColor:m,dotSize:g=12,cardWidth:b=420,className:E="",pushFactor:N=.47}){const d=r.useRef(null),w=r.useRef([]),y=r.useRef(null),[$,z]=r.useState(0),[M,le]=r.useState(b),[fe,Q]=r.useState(0),[B,de]=r.useState(0),[he,me]=r.useState(0),v=r.useRef(!1),p=r.useRef(null),[pe,we]=r.useState(!1),[ge,be]=r.useState(!0),[U,F]=r.useState(!1),_=r.useRef(0),ee=r.useRef(0),P=r.useRef(0),Y=r.useRef(0),x=r.useRef(null),ve=r.useRef(null),[xe,te]=r.useState(!1),k=r.useRef(null),[R,Te]=r.useState(!1),G=Oe(g,Z),ye=.22,Re=.28,ne=m||u,j=6,re=2,Ee=48,Ne=36;r.useEffect(()=>()=>{k.current&&clearTimeout(k.current)},[]),r.useEffect(()=>{if(!y.current)return;const e=y.current,t=new ResizeObserver(o=>{const i=o[0].contentRect;Q(i.height||0)});t.observe(e);const n=e.getBoundingClientRect();return Q(n.height||0),()=>t.disconnect()},[M,c.length]),r.useEffect(()=>{function e(){const t=d.current,n=window.innerHeight;if(!t||!n)return;const o=t.getBoundingClientRect(),i=Math.max(0,t.scrollHeight-n),l=K(-o.top,0,i),f=n/2,T=Math.max(0,f-l);de(T),me(Math.max(0,Math.min(f,f-T)));const I=window.innerWidth,A=I<$e;Te(A),le(He(I,b,{isNarrow:A,mobileLeftReserve:G,rightGutter:Pe})),we(window.scrollY>100);const C=window.scrollY<=re;be(C),C&&U&&F(!1),p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{v.current=!1;const ce=x.current;if(Number.isInteger(ce)){x.current=null,L(ce);return}const Ce=ue(w.current,n);Le(Ce,n)},140)}return e(),window.addEventListener("scroll",e,{passive:!0}),window.addEventListener("resize",e),window.addEventListener("orientationchange",e),()=>{window.removeEventListener("scroll",e),window.removeEventListener("resize",e),window.removeEventListener("orientationchange",e),p.current&&clearTimeout(p.current)}},[b,U,G]),r.useEffect(()=>{const e=t=>{const n=t.key;if(n!=="ArrowDown"&&n!=="PageDown"&&n!=="ArrowUp"&&n!=="PageUp")return;const o=d.current?.getBoundingClientRect();if(!(o&&o.top<window.innerHeight&&o.bottom>0)||(t.preventDefault(),v.current))return;const l=o.top>j,f=Math.abs(o.top)<=j;return n==="ArrowUp"||n==="PageUp"?f?D(!0):S(-1):l?q(o.top):S(1)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[c.length]);const je=40,Se=120,V=r.useRef(0),W=r.useRef(0);r.useEffect(()=>{const e=t=>{const n=d.current?.getBoundingClientRect();if(!n||!(n.top<window.innerHeight&&n.bottom>0))return;if(v.current){t.preventDefault();return}const i=Math.abs(t.deltaY),l=t.timeStamp||performance.now(),f=W.current?l-W.current:16;W.current=l;const T=1-Math.exp(-f/Se);if(V.current=(1-T)*V.current+T*i,V.current<=je){t.preventDefault(),_.current=0;return}if(_.current+=t.deltaY,Math.abs(_.current)<Ee){t.preventDefault();return}const I=_.current>0;_.current=0,t.preventDefault();const A=n.top>j,C=Math.abs(n.top)<=j;return I?A?q(n.top):S(1):C?D(!0):S(-1)};return window.addEventListener("wheel",e,{passive:!1}),()=>window.removeEventListener("wheel",e)},[c.length]),r.useEffect(()=>{const e=d.current;if(!e)return;const t=i=>{J(d.current)&&(ee.current=i.touches[0]?.clientY||0,P.current=0)},n=i=>{if(!J(d.current))return;if(v.current){i.preventDefault();return}const l=i.touches[0]?.clientY||0;P.current=ee.current-l,i.preventDefault()},o=()=>{if(!J(d.current)||v.current)return;const i=P.current;if(P.current=0,Math.abs(i)<Ne)return;const l=d.current.getBoundingClientRect(),f=l.top>j,T=Math.abs(l.top)<=j;return i>0?f?q(l.top):S(1):T?D(!0):S(-1)};return e.addEventListener("touchstart",t,{passive:!0}),e.addEventListener("touchmove",n,{passive:!1}),e.addEventListener("touchend",o,{passive:!0}),e.addEventListener("touchcancel",o,{passive:!0}),()=>{e.removeEventListener("touchstart",t),e.removeEventListener("touchmove",n),e.removeEventListener("touchend",o),e.removeEventListener("touchcancel",o)}},[c.length]),r.useEffect(()=>{if(!w.current.length)return;const e=new IntersectionObserver(t=>{for(const n of t){if(!n.isIntersecting)continue;const o=Number(n.target.getAttribute("data-idx"));Number.isNaN(o)||(v.current?x.current=o:L(o))}},{root:null,rootMargin:"-48% 0px -48% 0px",threshold:[.01]});return w.current.forEach((t,n)=>{t&&(t.setAttribute("data-idx",String(n)),e.observe(t))}),ve.current=e,()=>e.disconnect()},[c.length]);function q(e){te(!0),k.current&&clearTimeout(k.current),k.current=setTimeout(()=>te(!1),900),v.current=!0,window.scrollTo({top:window.scrollY+e,behavior:"smooth"}),p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{v.current=!1},420)}function S(e){const t=window.innerHeight,n=ue(w.current,t),o=K(n+e,0,c.length-1);if(o===n)return;const i=w.current[o];if(!i)return;v.current=!0;const l=window.scrollY+i.getBoundingClientRect().top;x.current=o,window.scrollTo({top:l,behavior:"smooth"}),p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{v.current=!1;const f=Number.isInteger(x.current)?x.current:o;x.current=null,L(f)},420)}function D(e=!1){e&&F(!0),v.current=!0,x.current=0,window.scrollTo({top:0,behavior:"smooth"}),p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{v.current=!1;const t=Number.isInteger(x.current)?x.current:0;x.current=null,L(t),e&&window.scrollY>re&&F(!1)},500)}function L(e){if(e===Y.current){oe(e);return}Y.current=e,z(e),requestAnimationFrame(()=>oe(e))}function oe(e){const t=w.current[e];if(!t)return;let n=t.querySelector("[data-card]")||t.querySelector('a[href],button,textarea,input,select,[tabindex]:not([tabindex="-1"])');n||(n=t),n.getAttribute&&n.getAttribute("tabindex")===null&&n.tagName==="DIV"&&n.setAttribute("tabindex","0");try{n.focus({preventScroll:!0})}catch{n.focus()}}function Le(e,t){const n=t/2,o=w.current[Y.current],i=w.current[e];if(!i)return L(e);const l=Math.abs(O(i)-n),f=o?Math.abs(O(o)-n):1/0,T=t/2*ye;l+T<f&&L(e)}function Ie(e){const t=window.innerHeight,n=w.current[e];if(!t||!n)return e===Y.current;const o=t/2;return Math.abs(O(n)-o)<=t/2*Re}const X="left-1/2 -translate-x-1/2",se={left:Z},Ae={left:Z+H/2};return s.jsxs("section",{ref:d,className:`relative z-10 w-full ${E}`,"aria-label":"Timeline",children:[s.jsx("div",{className:"pointer-events-none absolute inset-0",children:s.jsxs("div",{className:"sticky top-0 h-screen w-full",children:[s.jsx("div",{className:`absolute bg-[#374151] ${R?"":X}`,style:{...R?se:{},top:B,height:`calc(100vh - ${B}px)`,width:`${H}px`},"aria-hidden":!0}),s.jsx("div",{className:`absolute ${R?"":X}`,style:{...R?se:{},...R?{bottom:"50%"}:{top:B},height:he,width:`${H}px`,background:ne,boxShadow:`0 0 10px ${De(ne,.55)}`},"aria-hidden":!0}),s.jsxs("div",{className:`absolute top-1/2 -translate-y-1/2 ${R?"-translate-x-1/2":X}`,style:{...R?Ae:{},width:g,height:g},"aria-hidden":!0,children:[s.jsx("div",{className:"absolute -inset-2 rounded-full blur-md opacity-70 animate-pulse pointer-events-none z-10",style:{backgroundColor:u}}),s.jsx("div",{className:"absolute inset-0 rounded-full shadow-[0_0_6px_1px_rgba(0,0,0,0.25)] z-20",style:{backgroundColor:u}})]})]})}),s.jsx("div",{role:"list",children:c.map((e,t)=>{const n=Ie(t)||t===0&&xe,o=t===$,i=e.href?"a":"div",l=e.href?{href:e.href,target:e.target||"_blank",rel:"noopener noreferrer","aria-label":e.ariaLabel||`Open ${e.title||e.date}`}:{},f=t===0,T=K(N,0,1),A=f&&(ge||U)?fe*T:0;return s.jsx("article",{ref:C=>w.current[t]=C,role:"listitem",className:"min-h-screen w-full","data-idx":t,children:s.jsxs("div",{className:"grid min-h-screen w-full items-center md:grid-cols-2",style:R?{paddingLeft:G}:void 0,children:[s.jsx("div",{className:"hidden md:flex justify-end pr-8",children:s.jsx("time",{className:`select-none font-sans text-xl md:text-2xl transition-opacity z-20 ${n?"text-white/80":"text-white/50"}`,children:e.date})}),s.jsx("div",{className:"md:pl-8",children:s.jsxs(i,{...l,ref:f?y:null,"data-card":!0,"aria-current":o?"step":void 0,tabIndex:o?0:-1,className:`block rounded-2xl bg-[#0c1a22]/85 text-[#e0e0e0] shadow-xl backdrop-blur-sm px-4 py-3 select-none
                                transition-[opacity,transform] duration-300 will-change-transform
                                outline-none ring-0 focus:outline-none focus:ring-0 focus-visible:outline-none focus-visible:ring-0
                                ${n?"opacity-100":"opacity-70"}
                                ${e.href?"cursor-pointer hover:opacity-100 focus:opacity-100":""}`,style:{width:M,transform:`translateY(${A}px)`,WebkitTapHighlightColor:"transparent"},children:[R&&e.date?s.jsx("time",{className:"block mb-1 text-sm font-medium tracking-wide text-white/70",children:e.date}):null,e.title?s.jsx("h3",{className:"mb-2 font-bahnschrift text-2xl md:text-3xl text-[#f8da9c]",children:e.title}):null,s.jsx("p",{className:"text-base sm:text-lg md:text-xl lg:text-2xl leading-snug",children:e.body}),e.href?s.jsx("p",{className:"mt-2 text-sm text-white/60",children:"Click to learn more"}):null,e.image?.src?s.jsx("img",{src:e.image.src,alt:e.image.alt||"",loading:"lazy",className:"mt-3 w-full h-auto rounded-2xl object-cover"}):null]})})]})},e.id||t)})}),s.jsx("button",{type:"button",onClick:()=>D(!0),"aria-label":"Back to top",className:`fixed bottom-6 right-6 z-50 text-white/80 transition-opacity duration-200
                    ${pe?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"} 
                    hover:text-white focus:outline-none focus:ring-0`,style:{background:"transparent",border:"none"},children:s.jsx(Me,{className:"h-6 w-6 animate-bounce","aria-hidden":!0})})]})}function K(c,a,h){return Math.max(a,Math.min(h,c))}function O(c){const a=c.getBoundingClientRect();return a.top+a.height/2}function ue(c,a){const h=a/2;let u=0,m=1/0;return c.forEach((g,b)=>{if(!g)return;const E=Math.abs(O(g)-h);E<m&&(m=E,u=b)}),u}function De(c,a=1){const h=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(c);if(!h)return`rgba(64,213,209,${a})`;const u=parseInt(h[1],16),m=parseInt(h[2],16),g=parseInt(h[3],16);return`rgba(${u},${m},${g},${a})`}function He(c,a,h={}){const{isNarrow:u=!1,mobileLeftReserve:m=0,rightGutter:g=16}=h,b=32,E=H;if(u){const d=Math.max(220,c-m-g);return Math.min(a,d)}const N=Math.max(220,c/2-b-E);return Math.min(a,N)}function Oe(c,a){return a+c/2+8+12}function J(c){if(!c)return!1;const a=c.getBoundingClientRect();return a.top<window.innerHeight&&a.bottom>0}function We(){const c=r.useRef(null),[a,h]=r.useState(!0),u=a?ie:ae,[m,g]=r.useState(0),[b,E]=r.useState([u,u]);return r.useEffect(()=>{if(b[m]===u)return;let d=!1;const w=1-m,y=new Image;y.src=u;const $=async()=>{if(!d){try{y.decode&&await y.decode()}catch{}E(z=>{const M=[...z];return M[w]=u,M}),requestAnimationFrame(()=>{d||g(w)})}};return y.complete?$():y.onload=$,()=>{d=!0,y.onload=null}},[u,m,b]),r.useEffect(()=>{const N=()=>h(window.scrollY<=0);return window.addEventListener("scroll",N,{passive:!0}),()=>window.removeEventListener("scroll",N)},[]),s.jsxs("div",{className:"relative min-h-screen w-full",children:[s.jsxs("div",{className:"fixed inset-0 -z-10 bg-[#0c1a22] isolate",children:[s.jsx("img",{"aria-hidden":!0,alt:"",decoding:"async",src:b[0],className:`absolute inset-0 h-full w-full object-cover transition-opacity duration-700 ease-in-out will-change-[opacity] ${m===0?"opacity-100":"opacity-0"}`,style:{objectPosition:"center"}}),s.jsx("img",{"aria-hidden":!0,alt:"",decoding:"async",src:b[1],className:`absolute inset-0 h-full w-full object-cover transition-opacity duration-700 ease-in-out will-change-[opacity] ${m===1?"opacity-100":"opacity-0"}`,style:{objectPosition:"center"}})]}),s.jsx("header",{className:"relative z-30 transition-opacity duration-500",style:{opacity:a?1:0},children:s.jsx(ke,{})}),s.jsx("section",{className:"relative z-20 flex min-h-[40vh] items-center justify-center px-6",children:s.jsx("h1",{className:"font-bahnschrift text-4xl md:text-6xl text-[#e0e0e0] px-6 text-center leading-tight absolute top-[30vh]",children:"The Rise Reforming Timeline"})}),s.jsx("section",{ref:c,className:"relative z-10",children:s.jsx(Ye,{items:_e,backgroundUrl:ie,overlayUrl:ae,color:"#3ca6a6",dotSize:12,cardWidth:420})})]})}export{We as default};
