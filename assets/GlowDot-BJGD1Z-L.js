import{r as o,j as l}from"./index-DtEPuoEv.js";import{u as re}from"./GlowDotProvider-BNDmV2GP.js";import{X as ie}from"./x-BAAMbMDD.js";const fe=o.forwardRef(function(Lt,Nt){const{top:Ct="50%",left:Pt="50%",size:m=10,color:ot="#3ca6a6",title:Dt,text:st="Sample fact text goes here.",boxWidth:G=300,className:jt="",ariaLabel:$t="Info dot",fadeMs:j=220,dotId:y,boxNumber:$,defaultSide:z="auto",defaultGap:v=24,viewportPadding:E=16,defaultOffsetX:T=null,defaultOffsetY:B=null,boundsRef:O=null,absolutePx:F=!1,absX:L=null,absY:N=null}=Lt,{register:rt,setVisible:it,threshold:_}=re(),d=o.useRef(null),q=o.useRef(null),[M,h]=o.useState(!1),[p,ct]=o.useState(!1),[at,lt]=o.useState(!1),[zt,ut]=o.useState(!1),[k,ft]=o.useState(!1),[w,C]=o.useState({x:60,y:0}),U=o.useRef(w);o.useEffect(()=>{U.current=w},[w]);const[s,dt]=o.useState({w:G,h:0}),V=o.useRef(!1);function Tt(t){V.current=!0,h(e=>!e),t.preventDefault(),t.stopPropagation()}function Bt(t){if(V.current){V.current=!1;return}}function Ot(t){(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),h(e=>!e))}const[Ft,K]=o.useState(!1),ht=280,J=o.useRef(M);o.useEffect(()=>{J.current=M},[M]),o.useEffect(()=>{if(M)ut(!1),ct(!0);else{lt(!1);const t=setTimeout(()=>ct(!1),j),e=setTimeout(()=>ft(!1),j);return()=>{clearTimeout(t),clearTimeout(e)}}},[M,j]);function xt(t){return typeof t=="number"?`${t}px`:t}const mt={top:xt(Ct),left:xt(Pt),width:`${m}px`,height:`${m}px`,transform:"translate(-50%, -50%)"};o.useLayoutEffect(()=>{if(!q.current)return;const t=q.current,e=new ResizeObserver(r=>{const i=r[0].contentRect;dt({w:i.width,h:i.height})});e.observe(t);const n=t.getBoundingClientRect();return dt({w:n.width,h:n.height}),()=>e.disconnect()},[p,G,st]);function Q(){if(O?.current)return O.current.getBoundingClientRect();const t=d.current?.offsetParent;return t&&t instanceof HTMLElement?t.getBoundingClientRect():{left:0,top:0,width:window.innerWidth,height:window.innerHeight,right:window.innerWidth,bottom:window.innerHeight}}function Z(){const t=d.current?.getBoundingClientRect();return t?{cx:t.left+t.width/2,cy:t.top+t.height/2}:null}function kt(){const t=window.innerWidth,e=window.innerHeight;return{left:0,top:0,right:t,bottom:e,width:t,height:e}}function It(t,e){const n=Math.max(t.left,e.left),r=Math.max(t.top,e.top),i=Math.min(t.right??t.left+t.width,e.right??e.left+e.width),c=Math.min(t.bottom??t.top+t.height,e.bottom??e.top+e.height);return{left:n,top:r,right:i,bottom:c,width:Math.max(0,i-n),height:Math.max(0,c-r)}}function I(t,e){const n=Z();if(!n)return{x:t,y:e};const r=Q(),i=kt(),c=It(r,i);if(c.width===0||c.height===0)return{x:t,y:e};const u=c.left+E,P=c.top+E,b=c.right-E,g=c.bottom-E;let f=t,x=e;const a=n.cx+f-s.w/2,D=n.cy+x-s.h/2,A=a+s.w,W=D+s.h;return a<u&&(f+=u-a),A>b&&(f-=A-b),D<P&&(x+=P-D),W>g&&(x-=W-g),{x:f,y:x}}function pt(){const t=Z();if(!t)return{x:60,y:0};const e=Number.isFinite(T),n=Number.isFinite(B);if(e||n)return I(e?T:0,n?B:0);const r=Q(),i=r.width??r.right-r.left,{cx:c}=t,u={right:{x:v+s.w/2+m/2,y:0},left:{x:-(v+s.w/2+m/2),y:0},top:{x:0,y:-(v+s.h/2+m/2)},bottom:{x:0,y:v+s.h/2+m/2}};function P(g){const{cx:f,cy:x}=Z()||{cx:0,cy:0},a=Q(),D=a.left,A=a.top,W=a.right??a.left+a.width,Qt=a.bottom??a.top+a.height,{x:Zt,y:te}=I(g.x,g.y),St=f+Zt-s.w/2,Rt=x+te-s.h/2,ee=St+s.w,ne=Rt+s.h,oe=Math.max(0,Math.min(ee,W)-Math.max(St,D)),se=Math.max(0,Math.min(ne,Qt)-Math.max(Rt,A));return oe*se/(s.w*s.h+1e-6)}let b;if(z!=="auto")b=z;else{const f=c<r.left+i/2?["right","left","bottom","top"]:["left","right","bottom","top"];b=f.reduce((x,a)=>P(u[a])>P(u[x])?a:x,f[0])}return I(u[b].x,u[b].y)}o.useLayoutEffect(()=>{if(!p||k)return;const t=()=>{if(s.w===0||s.h===0)return requestAnimationFrame(t);C(e=>{const n=pt();return Math.abs(n.x-e.x)<.5&&Math.abs(n.y-e.y)<.5?e:n}),ut(!0),requestAnimationFrame(()=>lt(!0))};t()},[p,k,s.w,s.h,z,v,E,O,T,B]),o.useEffect(()=>{if(!p||k)return;const t=()=>{C(e=>{const n=pt();return Math.abs(n.x-e.x)<.5&&Math.abs(n.y-e.y)<.5?e:n})};return window.addEventListener("resize",t),window.addEventListener("orientationchange",t),()=>{window.removeEventListener("resize",t),window.removeEventListener("orientationchange",t)}},[p,k,s.w,s.h,z,v,E,O,T,B]);const X=o.useRef({on:!1,sx:0,sy:0,bx:0,by:0,frame:null,nx:0,ny:0});function wt(t){const e=X.current;e.on=!0,e.sx="touches"in t?t.touches[0].clientX:t.clientX,e.sy="touches"in t?t.touches[0].clientY:t.clientY,e.bx=U.current.x,e.by=U.current.y,e.nx=e.bx,e.ny=e.by,K(!1),ft(!0),t.preventDefault(),t.stopPropagation()}function Xt(){const t=X.current;t.frame||(t.frame=requestAnimationFrame(()=>{C({x:t.nx,y:t.ny}),t.frame=null}))}function H(t){const e=X.current;if(!e.on)return;const n="touches"in t?t.touches[0].clientX:t.clientX,r="touches"in t?t.touches[0].clientY:t.clientY;e.nx=e.bx+(n-e.sx),e.ny=e.by+(r-e.sy),Xt(),t.preventDefault(),t.stopPropagation()}function Y(t){const e=X.current;if(!e.on)return;e.on=!1,e.frame&&(cancelAnimationFrame(e.frame),e.frame=null),t?.stopPropagation?.();const n={x:e.nx,y:e.ny},r=I(n.x,n.y);Math.abs(r.x-n.x)>.5||Math.abs(r.y-n.y)>.5?(K(!0),C(r),setTimeout(()=>K(!1),ht)):C(n)}o.useEffect(()=>(window.addEventListener("mousemove",H),window.addEventListener("mouseup",Y),window.addEventListener("touchmove",H,{passive:!1}),window.addEventListener("touchend",Y),()=>{window.removeEventListener("mousemove",H),window.removeEventListener("mouseup",Y),window.removeEventListener("touchmove",H),window.removeEventListener("touchend",Y)}),[]);const S={x:m/2,y:m/2},R={x:w.x+s.w/2,y:w.y+s.h/2},tt=Math.min(S.x,R.x),et=Math.min(S.y,R.y),bt=Math.max(1,Math.abs(R.x-S.x)),gt=Math.max(1,Math.abs(R.y-S.y)),Ht=S.x-tt,Yt=S.y-et,At=R.x-tt,Wt=R.y-et,Gt={backgroundColor:ot},_t={backgroundColor:ot},yt=at?"opacity-100":"opacity-0",vt={transition:`opacity ${j}ms ease`},Et=zt?{}:{opacity:0,visibility:"hidden"},qt=at?"pointer-events-auto":"pointer-events-none",Ut=Ft?{transition:`transform ${ht}ms cubic-bezier(0.2, 0.8, 0.2, 1)`}:{},[nt,Mt]=o.useState(null);function Vt(){if(!(F&&Number.isFinite(L)&&Number.isFinite(N)))return null;const t=d.current?.offsetParent;if(t&&t instanceof HTMLElement){const e=t.getBoundingClientRect();return{left:L-e.left,top:N-e.top}}return{left:L,top:N}}o.useLayoutEffect(()=>{if(!(F&&Number.isFinite(L)&&Number.isFinite(N))){Mt(null);return}const t=()=>Mt(Vt());t(),window.addEventListener("resize",t),window.addEventListener("scroll",t,{passive:!0});const e=[],n=d.current?.offsetParent||d.current?.parentElement,r=c=>{if(!(c instanceof HTMLElement))return!1;const u=getComputedStyle(c);return/(auto|scroll)/.test(`${u.overflow}${u.overflowY}${u.overflowX}`)};let i=n;for(;i&&i!==document.body&&i!==document.documentElement;)r(i)&&(i.addEventListener("scroll",t,{passive:!0}),e.push(i)),i=i.parentElement;return()=>{window.removeEventListener("resize",t),window.removeEventListener("scroll",t),e.forEach(c=>c.removeEventListener("scroll",t))}},[F,L,N]);const Kt=F&&nt?{...mt,top:`${nt.top}px`,left:`${nt.left}px`}:mt,Jt=$!=null&&String($).length>0;return o.useImperativeHandle(Nt,()=>({open:()=>h(!0),close:()=>h(!1),isOpen:()=>J.current}),[]),o.useEffect(()=>y?rt(y,{open:()=>h(!0),close:()=>h(!1),isOpen:()=>J.current,getRect:()=>d.current?.getBoundingClientRect()??null}):void 0,[y,rt]),o.useEffect(()=>{if(!d.current||!y)return;const t=new IntersectionObserver(e=>{const n=e[0];it(y,n.isIntersecting&&n.intersectionRatio>=_)},{threshold:_});return t.observe(d.current),()=>t.disconnect()},[y,it,_]),l.jsxs("div",{ref:d,className:`absolute ${jt}`,style:Kt,children:[p&&l.jsx("svg",{className:`absolute pointer-events-none z-10 ${yt}`,style:{left:tt,top:et,width:bt,height:gt,...vt,...Et},viewBox:`0 0 ${bt} ${gt}`,children:l.jsx("line",{x1:Ht,y1:Yt,x2:At,y2:Wt,stroke:"#374151",strokeWidth:"1.25",strokeLinecap:"round"})}),l.jsx("div",{className:"absolute -inset-2 rounded-full blur-md opacity-70 animate-pulse pointer-events-none z-20",style:_t}),l.jsx("button",{type:"button",className:"absolute inset-0 rounded-full shadow-[0_0_6px_1px_rgba(0,0,0,0.25)] outline-none focus:outline-none z-30",style:Gt,"aria-label":$t,"aria-expanded":M,onMouseEnter:()=>h(!0),onFocus:()=>h(!0),onClick:Bt,onTouchStart:Tt,onKeyDown:Ot}),Jt&&l.jsx("div",{className:"absolute left-1/2 top-full -translate-x-1/2 mt-1 z-40",children:l.jsx("span",{className:"inline-flex h-6 min-w-6 px-2 items-center justify-center rounded-full bg-[#0c1a22]/85 text-white/90 text-xs font-medium pointer-events-none",children:String($)})}),p&&l.jsx("div",{ref:q,className:`absolute rounded-2xl bg-[#0c1a22]/85 text-white/90 cursor-move z-40 will-change-transform ${yt} ${qt}`,style:{width:G,transform:`translate3d(${w.x}px, ${w.y}px, 0)`,...vt,...Ut,...Et},onMouseDown:wt,onTouchStart:wt,children:l.jsxs("div",{className:"relative p-4 pt-3 pr-3",children:[l.jsx("button",{type:"button","aria-label":"Close textbox",className:"absolute top-2 right-2 inline-flex h-7 w-7 items-center justify-center rounded-md",style:{color:"#a9b3b8"},onClick:t=>{t.stopPropagation(),h(!1)},onMouseDown:t=>t.stopPropagation(),onTouchStart:t=>t.stopPropagation(),children:l.jsx(ie,{className:"h-4 w-4"})}),l.jsx("div",{className:"h-4"}),l.jsx("p",{className:"text-center text-base sm:text-lg md:text-xl lg:text-2xl leading-snug text-[#f8da9c]",children:Dt}),l.jsx("p",{className:"text-center text-base sm:text-lg md:text-xl lg:text-2xl leading-snug",children:st})]})})]})});export{fe as G};
